<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alcohol Consumption Survey</title>
</head>
<body>
    <h2>Alcohol Consumption Calculator</h2>
    <form id="auditCForm">
        <label for="q1">How often do you have a drink containing alcohol?</label>
        <select id="q1">
            <option value="" selected disabled>Select an option</option>
            <option value="0">Never</option>
            <option value="1">Monthly or less</option>
            <option value="2">2-4 times a month</option>
            <option value="3">2-3 times a week</option>
            <option value="4">4 or more times a week</option>
        </select>

        <label for="q2">How many drinks do you have on a typical day when you are drinking?</label>
        <select id="q2">
            <option value="" selected disabled>Select an option</option>
            <option value="0">1-2</option>
            <option value="1">3-4</option>
            <option value="2">5-6</option>
            <option value="3">7-9</option>
            <option value="4">10 or more</option>
        </select>

        <label for="q3">How often do you have six or more drinks on one occasion?</label>
        <select id="q3">
            <option value="" selected disabled>Select an option</option>
            <option value="0">Never</option>
            <option value="1">Less than monthly</option>
            <option value="2">Monthly</option>
            <option value="3">Weekly</option>
            <option value="4">Daily or almost daily</option>
        </select>

        <button type="button" onclick="calculateAuditC()">Calculate Score</button>
    </form>

    <p><a href="#" onclick="trackClick('Interactive Image')">Click Here for Alcohol Harms on the Body</a></p>
    <p><a href="#" onclick="trackClick('Units Calculator')">Click Here for Alcohol Units Calculator</a></p>

    <script>
        function calculateAuditC() {
            let q1 = document.getElementById("q1").value;
            let q2 = document.getElementById("q2").value;
            let q3 = document.getElementById("q3").value;

            let score = parseInt(q1) + parseInt(q2) + parseInt(q3);

            fetch("https://script.google.com/macros/s/AKfycbx4CMn-W0S2gIPSorgZ37Q9fqFdpxSI-OvNyGRoWYJzVBNHofKbP1MDdtuobMHnIGH2/exec", {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: new URLSearchParams({
                    q1: q1,
                    q2: q2,
                    q3: q3,
                    score: score
                }).toString()
            }).then(response => console.log("Survey data sent"))
              .catch(error => console.error("Error:", error));
        }

        function trackClick(eventType) {
            fetch("https://script.google.com/macros/s/AKfycbx4CMn-W0S2gIPSorgZ37Q9fqFdpxSI-OvNyGRoWYJzVBNHofKbP1MDdtuobMHnIGH2/exec", {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: new URLSearchParams({ event: eventType }).toString()
            }).then(response => console.log(eventType + " click logged"))
              .catch(error => console.error("Error:", error));
        }
    </script>
</body>
</html>
